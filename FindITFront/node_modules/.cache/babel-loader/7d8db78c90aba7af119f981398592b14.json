{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Panttinen\\\\source\\\\repos\\\\FindIT\\\\FindITFront\\\\src\\\\components\\\\teamsgrid.js\",\n    _s = $RefreshSig$();\n\nimport Table from 'react-bootstrap/Table';\nimport TeamMembersButton from './TeamMembersButton.js';\nimport contractService from '../services/contractService.js';\nimport Button from 'react-bootstrap/esm/Button';\nimport { useMsal } from '@azure/msal-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst TableHeads = _ref => {\n  let {\n    numberOfColumns\n  } = _ref;\n  let heads = [];\n\n  for (let i = -1; i < numberOfColumns; i++) {\n    heads.push( /*#__PURE__*/_jsxDEV(\"th\", {}, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 16\n    }, this));\n  }\n\n  return heads;\n};\n\n_c = TableHeads;\n\nconst TeamsGrid = _ref2 => {\n  _s();\n\n  let {\n    yourContracts,\n    setYourContracts\n  } = _ref2;\n  const {\n    accounts\n  } = useMsal();\n  let numberOfColumns = 3;\n\n  if (yourContracts !== '') {\n    yourContracts.forEach(element => {\n      if (element.consults.length > numberOfColumns) {\n        numberOfColumns = element.consults.length;\n      }\n    });\n  }\n\n  const endContract = contract => {\n    const answer = window.confirm('Are you sure you want to end contract?');\n\n    if (!answer) {\n      return;\n    }\n\n    const newContract = {\n      id: contract.id,\n      title: contract.title,\n      customerId: accounts[0].homeAccountId,\n      startDate: contract.startDate,\n      endDate: new Date(),\n      totalPrice: contract.totalPrice,\n      consults: contract.consults\n    };\n    contractService.update(contract.id, newContract).then(returnedContract => {\n      contractService.getCustomer(accounts[0].homeAccountId).then(contracts => {\n        setYourContracts(contracts);\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        responsive: \"sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Contract\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 6\n            }, this), /*#__PURE__*/_jsxDEV(TableHeads, {\n              numberOfColumns: numberOfColumns\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 6\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: yourContracts.map(contract => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: contract.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 8\n            }, this), contract.consults.map(consultant => /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(TeamMembersButton, {\n                consultant: consultant\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 33\n              }, this)\n            }, consultant.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 9\n            }, this)), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: new Date(contract.endDate.slice(0, 10)) < new Date(Date.now()) ? /*#__PURE__*/_jsxDEV(Button, {\n                className: \"contractbutton\",\n                variant: \"warning\",\n                children: \"Contract ended\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 12\n              }, this) : /*#__PURE__*/_jsxDEV(Button, {\n                className: \"contractbutton\",\n                variant: \"secondary\",\n                onClick: () => endContract(contract),\n                children: \"End contract\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 12\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 8\n            }, this)]\n          }, contract.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 7\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n\n_s(TeamsGrid, \"YcVXoIU3UA5Clev9jNCOnuw+OJA=\", false, function () {\n  return [useMsal];\n});\n\n_c2 = TeamsGrid;\nexport default TeamsGrid;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TableHeads\");\n$RefreshReg$(_c2, \"TeamsGrid\");","map":{"version":3,"names":["Table","TeamMembersButton","contractService","Button","useMsal","TableHeads","numberOfColumns","heads","i","push","TeamsGrid","yourContracts","setYourContracts","accounts","forEach","element","consults","length","endContract","contract","answer","window","confirm","newContract","id","title","customerId","homeAccountId","startDate","endDate","Date","totalPrice","update","then","returnedContract","getCustomer","contracts","map","consultant","slice","now"],"sources":["C:/Users/Panttinen/source/repos/FindIT/FindITFront/src/components/teamsgrid.js"],"sourcesContent":["import Table from 'react-bootstrap/Table';\r\nimport TeamMembersButton from './TeamMembersButton.js';\r\nimport contractService from '../services/contractService.js';\r\nimport Button from 'react-bootstrap/esm/Button';\r\nimport { useMsal } from '@azure/msal-react';\r\n\r\nconst TableHeads = ({numberOfColumns}) => {\r\n\tlet heads = []\r\n\tfor (let i = -1; i < numberOfColumns; i++) {\r\n    heads.push(<th key={i}></th>);\r\n\t}\r\n\treturn heads\r\n}\r\n\r\nconst TeamsGrid = ({yourContracts, setYourContracts}) => {\r\n\r\n\tconst { accounts } = useMsal()\r\n\r\n\tlet numberOfColumns = 3;\r\n\r\n\tif (yourContracts !== '')\r\n\t{\r\n\t\tyourContracts.forEach(element => {\r\n\t\t\tif (element.consults.length > numberOfColumns)\r\n\t\t\t{\r\n\t\t\t\tnumberOfColumns = element.consults.length\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconst endContract = (contract) => {\r\n\r\n\t\tconst answer = window.confirm('Are you sure you want to end contract?')\r\n\r\n\t\tif (!answer) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst newContract = {\r\n\t\t\tid: contract.id,\r\n\t\t\ttitle: contract.title,\r\n\t\t\tcustomerId: accounts[0].homeAccountId,\r\n\t\t\tstartDate: contract.startDate,\r\n\t\t\tendDate: new Date(),\r\n\t\t\ttotalPrice: contract.totalPrice,\r\n\t\t\tconsults: contract.consults\r\n\t\t}\r\n\r\n\t\tcontractService.update(contract.id, newContract).then(returnedContract => {\r\n\t\t\tcontractService.getCustomer(accounts[0].homeAccountId)\r\n      .then(contracts => {\r\n        setYourContracts(contracts)\r\n      })\r\n\t\t\t})\r\n\t}\r\n\r\n\t\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t<div>\r\n\t\t\t\t<Table responsive=\"sm\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Contract</th>\r\n\t\t\t\t\t<TableHeads numberOfColumns={numberOfColumns} />\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{yourContracts.map((contract)=>(\r\n\t\t\t\t\t\t<tr key={contract.id}>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{contract.title}\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t{contract.consults.map((consultant)=>(\r\n\t\t\t\t\t\t\t\t<td key={consultant.id}><TeamMembersButton consultant={consultant}/></td>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t{new Date(contract.endDate.slice(0, 10)) < new Date(Date.now())\r\n\t\t\t\t\t\t\t\t\t? <Button className='contractbutton' variant=\"warning\">Contract ended</Button>\r\n\t\t\t\t\t\t\t\t\t: <Button className='contractbutton' variant=\"secondary\" onClick={() => endContract(contract)}>End contract</Button>\r\n\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t) ) }\r\n\t\t\t\t</tbody>\r\n\t\t\t\t</Table>\r\n\t\t\t</div>\r\n\t\t\t</>\r\n\t\t\t);\r\n\t\r\n}\r\n\r\nexport default TeamsGrid;\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}